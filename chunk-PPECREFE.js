import{a as j}from"./chunk-ZUOQAOXG.js";import{l as P}from"./chunk-6DVQQKJH.js";import{j as F}from"./chunk-HCIPUTK6.js";import{j as V}from"./chunk-MMCJCNKH.js";import{Bb as x,Cb as m,Ib as a,Jb as T,Ka as g,Kb as v,Na as o,Qb as I,Ta as w,Ub as D,V as h,Vb as E,Xa as S,aa as _,ab as u,ba as C,kb as b,ob as d,qb as y,rb as k,sb as r,tb as n,ub as s,xb as f}from"./chunk-4CFQG3UO.js";import"./chunk-4CLCTAJ7.js";var L=i=>["/checout",i],O=(i,e)=>e.product;function G(i,e){if(i&1&&(a(0),D(1,"currency")),i&2){let t=m(2);v(" ",E(1,1,t.cartData.totalCartPrice,"GBP"),"")}}function R(i,e){i&1&&a(0,"0 EGP")}function U(i,e){if(i&1){let t=f();r(0,"span",16),x("click",function(){_(t);let l=m().$implicit,p=m(2);return C(p.updateCount(l.product._id,l.count-1))}),s(1,"i",18),n()}}function B(i,e){if(i&1){let t=f();r(0,"div",4)(1,"div",6)(2,"div",7),s(3,"img",8),n()(),r(4,"div",9)(5,"div",10)(6,"h1",11),a(7),n(),r(8,"h2",12),a(9),n(),r(10,"h3",13),x("click",function(){let l=_(t).$implicit,p=m(2);return C(p.deleteItemFromCart(l.product._id))}),a(11," Remove"),s(12,"i",14),n()()(),r(13,"div",6)(14,"div",15)(15,"span",16),x("click",function(){let l=_(t).$implicit,p=m(2);return C(p.updateCount(l.product._id,l.count+1))}),s(16,"i",17),n(),r(17,"h3"),a(18),n(),u(19,U,2,0,"span"),n()()()}if(i&2){let t=e.$implicit;o(3),b("src",t.product.imageCover,g),o(4),v("Title:",t.product.title,""),o(2),v("Price :",t.price,""),o(9),T(t.count),o(),d(t.count>=1?19:-1)}}function M(i,e){if(i&1){let t=f();r(0,"div",5)(1,"button",19),x("click",function(){_(t);let l=m(2);return C(l.clearCart())}),a(2,"delete all cart"),s(3,"i",20),n()()}}function N(i,e){if(i&1&&(r(0,"div",5)(1,"button",21),a(2,"Check out "),n()()),i&2){let t=m(2);o(),b("routerLink",I(1,L,t.cartData._id))}}function q(i,e){if(i&1&&(r(0,"section",0)(1,"h1",1),a(2,"Shop Cart"),n(),r(3,"h3",2),a(4,"Total Cart Price :"),u(5,G,2,4)(6,R,1,0),n(),r(7,"div",3),y(8,B,20,5,"div",4,O),u(10,M,4,0,"div",5)(11,N,3,3,"div",5),n()()),i&2){let t=m();o(5),d(t.cartData.totalCartPrice>0?5:6),o(3),k(t.cartData.products),o(2),d(t.cartData.products.length>0?10:-1),o(),d(t.cartData.products.length>0?11:-1)}}var $=class i{constructor(e){this.toastr=e}cartData=null;_CartService=h(P);ngOnInit(){this._CartService.GetLoggedUserCart().subscribe({next:e=>{this.cartData=e.data},error:e=>{console.log(e)}})}deleteItemFromCart(e){this._CartService.RemoveSpecificCartItem(e).subscribe({next:t=>{this.cartData=t.data,this._CartService.cartcount.next(t.numOfCartItems)},error:t=>{console.log(t)}})}updateCount(e,t){t>=1&&this._CartService.Updatecartproductquantity(e,t).subscribe({next:c=>{console.log(c),this.cartData=c.data},error:c=>{console.log(c)}})}clearCart(){this._CartService.Clearusercart().subscribe({next:e=>{console.log(e),this.cartData={},this.toastr.info("The cart has been cleared!")},error:e=>{console.log(e)}})}static \u0275fac=function(t){return new(t||i)(w(j))};static \u0275cmp=S({type:i,selectors:[["app-cart"]],decls:1,vars:1,consts:[[1,"bg-slate-100","rounded-md","my-4","p-4","w-2/3","mx-auto","shadow-md"],[1,"font-black","text-4xl","text-emerald-400","my-3"],[1,"font-black","text-1xl","text-emerald-400","my-3"],[1,"container","w-[90%]","mx-auto"],[1,"flex","flex-wrap","justify-between","items-center","border-b-4","border-gray-400","py-2"],[1,"my-3"],[1,"w-full","sm:w-1/5"],[1,"p-img"],["alt","",1,"w-full","object-contain",3,"src"],[1,"w-full","sm:w-1/2"],[1,"p-desc"],[1,"font-black","text-5xl","my-3"],[1,"font-black","text-2xl","text-emerald-400","my-3"],[1,"text-red-600","cursor-pointer","my-3",3,"click"],[1,"fa-solid","fa-trash"],[1,"count","text-emerald-400","text-2xl","flex","flex-wrap","justify-between"],[3,"click"],[1,"fa-solid","fa-circle-plus"],[1,"fa-solid","fa-circle-minus"],[1,"my-btn",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"my-btn",3,"routerLink"]],template:function(t,c){t&1&&u(0,q,12,3,"section",0),t&2&&d(c.cartData!=null?0:-1)},dependencies:[V,F],encapsulation:2})};export{$ as CartComponent};
